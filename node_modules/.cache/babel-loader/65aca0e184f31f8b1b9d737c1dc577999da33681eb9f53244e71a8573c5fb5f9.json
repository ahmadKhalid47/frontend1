{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import MessageContex from\"./MessageContex\";import DisplayMessages from\"./DisplayMessages\";import{Button,Form}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MessageTo(){var user=localStorage.getItem(\"email\");var token=localStorage.getItem(\"token\");var _useParams=useParams(),target=_useParams.target;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),messageText=_useState2[0],setMessageText=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),messageSended=_useState4[0],setMessageSended=_useState4[1];var contextSetter={user:user,token:token,target:target,messageSended:messageSended};useEffect(function(){function makeMessageDb(){return _makeMessageDb.apply(this,arguments);}function _makeMessageDb(){_makeMessageDb=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://127.0.0.1:5000/makeMessageDb/\".concat(user,\"/\").concat(target),{headers:{Authorization:token}});case 2:case\"end\":return _context.stop();}},_callee);}));return _makeMessageDb.apply(this,arguments);}makeMessageDb();},[user,target,token]);function sendMessage(){return _sendMessage.apply(this,arguments);}function _sendMessage(){_sendMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(messageText.trim()===\"\")){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.next=4;return axios.post(\"http://127.0.0.1:5000/messageTo/\".concat(user,\"/\").concat(target),{messageText:messageText},{headers:{Authorization:token}});case 4:setMessageText(\"\");setMessageSended(messageSended+1);case 6:case\"end\":return _context2.stop();}},_callee2);}));return _sendMessage.apply(this,arguments);}return/*#__PURE__*/_jsx(MessageContex.Provider,{value:contextSetter,children:/*#__PURE__*/_jsxs(\"div\",{style:{height:\"85vh\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"messageDiv\",children:/*#__PURE__*/_jsx(DisplayMessages,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100 d-flex justify-content-center messageInput py-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex w-75 py-1 rounded-pill\",children:[/*#__PURE__*/_jsx(Form.Control,{value:messageText,type:\"text\",onChange:function onChange(e){return setMessageText(e.target.value);},className:\"rounded-start-pill\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return sendMessage();},className:\"rounded-end-pill pe-3\",children:\"send\"})]})})]})});}export default MessageTo;","map":{"version":3,"names":["axios","useEffect","useState","useParams","MessageContex","DisplayMessages","Button","Form","jsx","_jsx","jsxs","_jsxs","MessageTo","user","localStorage","getItem","token","_useParams","target","_useState","_useState2","_slicedToArray","messageText","setMessageText","_useState3","_useState4","messageSended","setMessageSended","contextSetter","makeMessageDb","_makeMessageDb","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","concat","headers","Authorization","stop","sendMessage","_sendMessage","_callee2","_callee2$","_context2","trim","abrupt","post","Provider","value","children","style","height","className","Control","type","onChange","e","onClick"],"sources":["C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/src/MessageTo.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport MessageContex from \"./MessageContex\";\r\nimport DisplayMessages from \"./DisplayMessages\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nfunction MessageTo() {\r\n  let user = localStorage.getItem(\"email\");\r\n  let token = localStorage.getItem(\"token\");\r\n  let { target } = useParams();\r\n  let [messageText, setMessageText] = useState(\"\");\r\n  let [messageSended, setMessageSended] = useState(0);\r\n\r\n  let contextSetter = {\r\n    user: user,\r\n    token: token,\r\n    target: target,\r\n    messageSended: messageSended,\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function makeMessageDb() {\r\n      await axios.get(`http://127.0.0.1:5000/makeMessageDb/${user}/${target}`, {\r\n        headers: {\r\n          Authorization: token,\r\n        },\r\n      });\r\n    }\r\n    makeMessageDb();\r\n  }, [user, target, token]);\r\n\r\n  async function sendMessage() {\r\n    if (messageText.trim() === \"\") {\r\n      return;\r\n    }\r\n    await axios.post(\r\n      `http://127.0.0.1:5000/messageTo/${user}/${target}`,\r\n      { messageText },\r\n      {\r\n        headers: {\r\n          Authorization: token,\r\n        },\r\n      }\r\n    );\r\n    setMessageText(\"\");\r\n    setMessageSended(messageSended + 1);\r\n  }\r\n\r\n  return (\r\n    <MessageContex.Provider value={contextSetter}>\r\n      <div style={{ height: \"85vh\" }}>\r\n        <div className=\"messageDiv\">\r\n          <DisplayMessages />\r\n        </div>\r\n        <div className=\"w-100 d-flex justify-content-center messageInput py-1\">\r\n          <div className=\"d-flex w-75 py-1 rounded-pill\">\r\n            <Form.Control\r\n              value={messageText}\r\n              type=\"text\"\r\n              onChange={(e) => setMessageText(e.target.value)}\r\n              className=\"rounded-start-pill\"\r\n            />\r\n            <Button\r\n              onClick={() => sendMessage()}\r\n              className=\"rounded-end-pill pe-3\"\r\n            >\r\n              send\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </MessageContex.Provider>\r\n  );\r\n}\r\n\r\nexport default MessageTo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}