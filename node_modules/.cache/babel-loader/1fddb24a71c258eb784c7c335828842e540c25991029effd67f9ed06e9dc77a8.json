{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Loading from\"./Loading\";import axios from\"axios\";import AccountPrivacyComponent from\"./AccountPrivacyComponent\";import SettingContext from\"./SettingContext\";import dataGetterFunction from\"./DateGetterFunction\";import Logout from\"./Logout\";import{Navigate}from\"react-router-dom\";import{ListGroup}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Settings(){var token=localStorage.getItem(\"token\");var user=localStorage.getItem(\"email\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),accountPrivacy=_useState4[0],setAccountPrivacy=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loader=_useState6[0],setLoader=_useState6[1];var settingContextSetter={accountPrivacy:accountPrivacy,setAccountPrivacy:setAccountPrivacy};useEffect(function(){dataGetterFunction(\"settings\",setData,setLoader);},[token,user]);useEffect(function(){if(accountPrivacy===\"\"){return;}function accountPrivacyFunc(){return _accountPrivacyFunc.apply(this,arguments);}function _accountPrivacyFunc(){_accountPrivacyFunc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"http://127.0.0.1:5000/setAccountPrivacyState/\".concat(user),{accountPrivacy:accountPrivacy},{headers:{Authorization:token}});case 2:case\"end\":return _context.stop();}},_callee);}));return _accountPrivacyFunc.apply(this,arguments);}accountPrivacyFunc();},[accountPrivacy,token,user]);useEffect(function(){function accountPrivacyStateFunc(){return _accountPrivacyStateFunc.apply(this,arguments);}function _accountPrivacyStateFunc(){_accountPrivacyStateFunc=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var accountPrivacyResult;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"http://127.0.0.1:5000/getAccountPrivacyState/\".concat(user),{headers:{Authorization:token}});case 2:accountPrivacyResult=_context2.sent;if(accountPrivacyResult.data.result!==\"token error\"){setAccountPrivacy(accountPrivacyResult.data.result);}case 4:case\"end\":return _context2.stop();}},_callee2);}));return _accountPrivacyStateFunc.apply(this,arguments);}accountPrivacyStateFunc();},[token,user]);return/*#__PURE__*/_jsx(SettingContext.Provider,{value:settingContextSetter,children:data===\"token error\"?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):loader?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(\"div\",{style:{height:\"90vh\"},className:\"bg-secondary\",children:/*#__PURE__*/_jsxs(ListGroup,{className:\"rounded-0\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{className:\"bg-secondary\",children:/*#__PURE__*/_jsx(AccountPrivacyComponent,{})}),/*#__PURE__*/_jsx(ListGroup.Item,{className:\"bg-secondary\",children:/*#__PURE__*/_jsx(Logout,{})})]})})});}export default Settings;","map":{"version":3,"names":["React","useEffect","useState","Loading","axios","AccountPrivacyComponent","SettingContext","dataGetterFunction","Logout","Navigate","ListGroup","jsx","_jsx","jsxs","_jsxs","Settings","token","localStorage","getItem","user","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","accountPrivacy","setAccountPrivacy","_useState5","_useState6","loader","setLoader","settingContextSetter","accountPrivacyFunc","_accountPrivacyFunc","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","concat","headers","Authorization","stop","accountPrivacyStateFunc","_accountPrivacyStateFunc","_callee2","accountPrivacyResult","_callee2$","_context2","get","sent","result","Provider","value","children","to","style","height","className","Item"],"sources":["C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/src/Settings.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Loading from \"./Loading\";\r\nimport axios from \"axios\";\r\nimport AccountPrivacyComponent from \"./AccountPrivacyComponent\";\r\nimport SettingContext from \"./SettingContext\";\r\nimport dataGetterFunction from \"./DateGetterFunction\";\r\nimport Logout from \"./Logout\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { ListGroup } from \"react-bootstrap\";\r\nfunction Settings() {\r\n  let token = localStorage.getItem(\"token\");\r\n  let user = localStorage.getItem(\"email\");\r\n  let [data, setData] = useState([]);\r\n  let [accountPrivacy, setAccountPrivacy] = useState(\"\");\r\n  let [loader, setLoader] = useState(true);\r\n\r\n  let settingContextSetter = {\r\n    accountPrivacy,\r\n    setAccountPrivacy,\r\n  };\r\n\r\n  useEffect(() => {\r\n    dataGetterFunction(\"settings\", setData, setLoader);\r\n  }, [token, user]);\r\n\r\n  useEffect(() => {\r\n    if (accountPrivacy === \"\") {\r\n      return;\r\n    }\r\n    async function accountPrivacyFunc() {\r\n      await axios.post(\r\n        `http://127.0.0.1:5000/setAccountPrivacyState/${user}`,\r\n        { accountPrivacy },\r\n        {\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        }\r\n      );\r\n    }\r\n    accountPrivacyFunc();\r\n  }, [accountPrivacy, token, user]);\r\n\r\n  useEffect(() => {\r\n    async function accountPrivacyStateFunc() {\r\n      let accountPrivacyResult = await axios.get(\r\n        `http://127.0.0.1:5000/getAccountPrivacyState/${user}`,\r\n        {\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        }\r\n      );\r\n      if (accountPrivacyResult.data.result !== \"token error\") {\r\n        setAccountPrivacy(accountPrivacyResult.data.result);\r\n      }\r\n    }\r\n    accountPrivacyStateFunc();\r\n  }, [token, user]);\r\n\r\n  return (\r\n    <SettingContext.Provider value={settingContextSetter}>\r\n      {data === \"token error\" ? (\r\n        <Navigate to={\"/\"} />\r\n      ) : loader ? (\r\n        <Loading />\r\n      ) : (\r\n        <div style={{ height: \"90vh\" }} className=\"bg-secondary\">\r\n          <ListGroup className=\"rounded-0\">\r\n            <ListGroup.Item className=\"bg-secondary\">\r\n              <AccountPrivacyComponent />\r\n            </ListGroup.Item>\r\n            <ListGroup.Item className=\"bg-secondary\">\r\n              <Logout />\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </div>\r\n      )}\r\n    </SettingContext.Provider>\r\n  );\r\n}\r\n\r\nexport default Settings;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}