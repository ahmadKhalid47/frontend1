{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useContext,useEffect,useState}from\"react\";import Loading from\"./Loading\";import MessageContex from\"./MessageContex\";import{Navigate}from\"react-router-dom\";import{ListGroup,ListGroupItem,Image}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DisplayMessages(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messagesData=_useState2[0],setMessageData=_useState2[1];var _useContext=useContext(MessageContex),messageSended=_useContext.messageSended;var _useContext2=useContext(MessageContex),user=_useContext2.user;var _useContext3=useContext(MessageContex),token=_useContext3.token;var _useContext4=useContext(MessageContex),target=_useContext4.target;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loader=_useState4[0],setLoader=_useState4[1];useEffect(function(){function getMessagesData(){return _getMessagesData.apply(this,arguments);}function _getMessagesData(){_getMessagesData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _messagesData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://127.0.0.1:5000/getMessagesData/\".concat(user,\"/\").concat(target),{headers:{Authorization:token}});case 3:_messagesData=_context.sent;setLoader(true);setMessageData(_messagesData.data.result);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:_context.prev=10;setLoader(false);return _context.finish(10);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,8,10,13]]);}));return _getMessagesData.apply(this,arguments);}getMessagesData();},[user,target,token,messageSended]);return/*#__PURE__*/_jsx(_Fragment,{children:messagesData===\"token error\"?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-5 bg-success\",style:{height:\"10%\"},children:/*#__PURE__*/_jsx(\"h1\",{children:target})}),/*#__PURE__*/_jsx(ListGroup,{className:\"rounded-0 d-flex flex-column-reverse\",style:{position:\"relative\",height:\"90%\",overflow:\"auto\"},children:loader===true?/*#__PURE__*/_jsx(ListGroup.Item,{className:\"px-5\",children:/*#__PURE__*/_jsx(Loading,{})}):messagesData.length!==0?messagesData.map(function(item,key){return/*#__PURE__*/_jsx(ListGroupItem,{className:\"d-flex border-0 px-5 \".concat(messagesData[messagesData.length-(key+1)].sender===user?\"flex-row-reverse\":\"\"),style:{backgroundColor:\"transparent\"},children:messagesData[messagesData.length-(key+1)].pic?/*#__PURE__*/_jsx(Image,{src:\"../\".concat(messagesData[messagesData.length-(key+1)].pic),alt:\"\",width:\"100px\",rounded:true}):/*#__PURE__*/_jsx(ListGroup.Item,{className:\"bg-success rounded \".concat(messagesData[messagesData.length-(key+1)].sender===user?\"bg-danger flex-row-reverse px-5\":\"bg-primary px-5\"),children:messagesData[messagesData.length-(key+1)].text})},key+1);}):/*#__PURE__*/_jsx(\"h1\",{className:\"px-5\",children:\"no messages yet\"})})]})});}export default DisplayMessages;","map":{"version":3,"names":["axios","useContext","useEffect","useState","Loading","MessageContex","Navigate","ListGroup","ListGroupItem","Image","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DisplayMessages","_useState","_useState2","_slicedToArray","messagesData","setMessageData","_useContext","messageSended","_useContext2","user","_useContext3","token","_useContext4","target","_useState3","_useState4","loader","setLoader","getMessagesData","_getMessagesData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_messagesData","wrap","_callee$","_context","prev","next","get","concat","headers","Authorization","sent","data","result","t0","finish","stop","children","to","className","style","height","position","overflow","Item","length","map","item","key","sender","backgroundColor","pic","src","alt","width","rounded","text"],"sources":["C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/src/DisplayMessages.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport Loading from \"./Loading\";\r\nimport MessageContex from \"./MessageContex\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { ListGroup, ListGroupItem, Image } from \"react-bootstrap\";\r\nfunction DisplayMessages() {\r\n  let [messagesData, setMessageData] = useState([]);\r\n  let { messageSended } = useContext(MessageContex);\r\n  let { user } = useContext(MessageContex);\r\n  let { token } = useContext(MessageContex);\r\n  let { target } = useContext(MessageContex);\r\n  let [loader, setLoader] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function getMessagesData() {\r\n      try {\r\n        let messagesData = await axios.get(\r\n          `http://127.0.0.1:5000/getMessagesData/${user}/${target}`,\r\n          {\r\n            headers: {\r\n              Authorization: token,\r\n            },\r\n          }\r\n        );\r\n        setLoader(true);\r\n        setMessageData(messagesData.data.result);\r\n      } catch (err) {\r\n      } finally {\r\n        setLoader(false);\r\n      }\r\n    }\r\n    getMessagesData();\r\n  }, [user, target, token, messageSended]);\r\n\r\n  return (\r\n    <>\r\n      {messagesData === \"token error\" ? (\r\n        <Navigate to={\"/\"} />\r\n      ) : (\r\n        <>\r\n          <div\r\n            className=\"px-5 bg-success\"\r\n            style={{\r\n              height: \"10%\",\r\n            }}\r\n          >\r\n            <h1>{target}</h1>\r\n          </div>\r\n          <ListGroup\r\n            className=\"rounded-0 d-flex flex-column-reverse\"\r\n            style={{\r\n              position: \"relative\",\r\n              height: \"90%\",\r\n              overflow: \"auto\",\r\n            }}\r\n          >\r\n            {loader === true ? (\r\n              <ListGroup.Item className=\"px-5\">\r\n                <Loading />\r\n              </ListGroup.Item>\r\n            ) : messagesData.length !== 0 ? (\r\n              messagesData.map((item, key) => (\r\n                <ListGroupItem\r\n                  className={`d-flex border-0 px-5 ${\r\n                    messagesData[messagesData.length - (key + 1)].sender ===\r\n                    user\r\n                      ? \"flex-row-reverse\"\r\n                      : \"\"\r\n                  }`}\r\n                  style={{ backgroundColor: \"transparent\" }}\r\n                  key={key + 1}\r\n                >\r\n                  {messagesData[messagesData.length - (key + 1)].pic ? (\r\n                    <Image\r\n                      src={`../${\r\n                        messagesData[messagesData.length - (key + 1)].pic\r\n                      }`}\r\n                      alt=\"\"\r\n                      width={\"100px\"}\r\n                      rounded\r\n                    />\r\n                  ) : (\r\n                    <ListGroup.Item\r\n                      className={`bg-success rounded ${\r\n                        messagesData[messagesData.length - (key + 1)].sender ===\r\n                        user\r\n                          ? \"bg-danger flex-row-reverse px-5\"\r\n                          : \"bg-primary px-5\"\r\n                      }`}\r\n                    >\r\n                      {messagesData[messagesData.length - (key + 1)].text}\r\n                    </ListGroup.Item>\r\n                  )}\r\n                </ListGroupItem>\r\n              ))\r\n            ) : (\r\n              <h1 className=\"px-5\">no messages yet</h1>\r\n            )}\r\n          </ListGroup>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DisplayMessages;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}