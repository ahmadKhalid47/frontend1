{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Loading from\"./Loading\";import axios from\"axios\";import dataGetterFunction from\"./DateGetterFunction\";import{Navigate}from\"react-router-dom\";import{Form,Button}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AddPost(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),caption=_useState6[0],setCaption=_useState6[1];var token=localStorage.getItem(\"token\");var user=localStorage.getItem(\"email\");var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loader=_useState8[0],setLoader=_useState8[1];useEffect(function(){dataGetterFunction(\"addPost\",setData,setLoader);},[token,user]);function post(){return _post.apply(this,arguments);}function _post(){_post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(image===\"\"||image===null)){_context.next=3;break;}alert(\"Please select an Image!\");return _context.abrupt(\"return\");case 3:formData=new FormData();formData.append(\"image\",image);formData.append(\"caption\",caption);_context.next=8;return axios.post(\"http://127.0.0.1:5000/post/\".concat(user),formData,{headers:{Authorization:token}});case 8:setCaption(\"\");setImage(null);case 10:case\"end\":return _context.stop();}},_callee);}));return _post.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",style:{minHeight:\"90vh\",maxHeight:\"fit-content\"},children:data===\"token error\"?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):loader===true?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Form.Label,{className:\"pt-4\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Upload image\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Form.Control,{type:\"file\",name:\"image\",onChange:function onChange(e){setImage(e.target.files[0]);},className:\"rounded-0\"})}),/*#__PURE__*/_jsx(Form.Label,{className:\"pt-4\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Caption\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex rounded-0\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"caption\",value:caption,onChange:function onChange(e){return setCaption(e.target.value);},className:\"rounded-0\"}),/*#__PURE__*/_jsx(Button,{variant:\"success rounded-0\",onClick:function onClick(){return post();},children:\"Post\"})]})]})})});}export default AddPost;","map":{"version":3,"names":["React","useEffect","useState","Loading","axios","dataGetterFunction","Navigate","Form","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddPost","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","image","setImage","_useState5","_useState6","caption","setCaption","token","localStorage","getItem","user","_useState7","_useState8","loader","setLoader","post","_post","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","wrap","_callee$","_context","prev","next","alert","abrupt","FormData","append","concat","headers","Authorization","stop","children","className","style","minHeight","maxHeight","to","Label","Control","type","name","onChange","e","target","files","value","variant","onClick"],"sources":["C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/src/AddPost.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Loading from \"./Loading\";\r\nimport axios from \"axios\";\r\nimport dataGetterFunction from \"./DateGetterFunction\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { Form, Button } from \"react-bootstrap\";\r\n\r\nfunction AddPost() {\r\n  let [data, setData] = useState([]);\r\n  let [image, setImage] = useState(\"\");\r\n  let [caption, setCaption] = useState(\"\");\r\n  let token = localStorage.getItem(\"token\");\r\n  let user = localStorage.getItem(\"email\");\r\n  let [loader, setLoader] = useState(true);\r\n\r\n  useEffect(() => {\r\n    dataGetterFunction(\"addPost\", setData, setLoader);\r\n  }, [token, user]);\r\n\r\n  async function post() {\r\n    if (image === \"\" || image === null) {\r\n      alert(\"Please select an Image!\");\r\n      return;\r\n    }\r\n\r\n    let formData = new FormData();\r\n    formData.append(\"image\", image);\r\n    formData.append(\"caption\", caption);\r\n    await axios.post(`http://127.0.0.1:5000/post/${user}`, formData, {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    });\r\n    setCaption(\"\");\r\n    setImage(null);\r\n  }\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"d-flex justify-content-center\"\r\n        style={{ minHeight: \"90vh\", maxHeight: \"fit-content\" }}\r\n      >\r\n        {data === \"token error\" ? (\r\n          <Navigate to={\"/\"} />\r\n        ) : loader === true ? (\r\n          <Loading />\r\n        ) : (\r\n          <div>\r\n            <Form.Label className=\"pt-4\">\r\n              <h4>Upload image</h4>\r\n            </Form.Label>\r\n            <div>\r\n              <Form.Control\r\n                type=\"file\"\r\n                name=\"image\"\r\n                onChange={(e) => {\r\n                  setImage(e.target.files[0]);\r\n                }}\r\n                className=\"rounded-0\"\r\n              />\r\n            </div>\r\n            <Form.Label className=\"pt-4\">\r\n              <h4>Caption</h4>\r\n            </Form.Label>\r\n            <div className=\"d-flex rounded-0\">\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"caption\"\r\n                value={caption}\r\n                onChange={(e) => setCaption(e.target.value)}\r\n                className=\"rounded-0\"\r\n              />\r\n              <Button variant=\"success rounded-0\" onClick={() => post()}>\r\n                Post\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddPost;\r\n"],"mappings":"ubAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,kBAAkB,KAAM,sBAAsB,CACrD,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,IAAI,CAAEC,MAAM,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE/C,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB,IAAAC,SAAA,CAAsBd,QAAQ,CAAC,EAAE,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAClB,IAAAI,UAAA,CAAwBnB,QAAQ,CAAC,EAAE,CAAC,CAAAoB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAA4BvB,QAAQ,CAAC,EAAE,CAAC,CAAAwB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IACxB,GAAI,CAAAG,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzC,GAAI,CAAAC,IAAI,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACxC,IAAAE,UAAA,CAA0B/B,QAAQ,CAAC,IAAI,CAAC,CAAAgC,UAAA,CAAAhB,cAAA,CAAAe,UAAA,IAAnCE,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IAEtBjC,SAAS,CAAC,UAAM,CACdI,kBAAkB,CAAC,SAAS,CAAEe,OAAO,CAAEgB,SAAS,CAAC,CACnD,CAAC,CAAE,CAACP,KAAK,CAAEG,IAAI,CAAC,CAAC,CAAC,QAEH,CAAAK,IAAIA,CAAA,SAAAC,KAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,MAAA,EAAAA,KAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAnB,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,cACM3B,KAAK,GAAK,EAAE,EAAIA,KAAK,GAAK,IAAI,GAAAyB,QAAA,CAAAE,IAAA,UAChCC,KAAK,CAAC,yBAAyB,CAAC,CAAC,OAAAH,QAAA,CAAAI,MAAA,kBAI/BP,QAAQ,CAAG,GAAI,CAAAQ,QAAQ,CAAC,CAAC,CAC7BR,QAAQ,CAACS,MAAM,CAAC,OAAO,CAAE/B,KAAK,CAAC,CAC/BsB,QAAQ,CAACS,MAAM,CAAC,SAAS,CAAE3B,OAAO,CAAC,CAACqB,QAAA,CAAAE,IAAA,SAC9B,CAAA9C,KAAK,CAACiC,IAAI,+BAAAkB,MAAA,CAA+BvB,IAAI,EAAIa,QAAQ,CAAE,CAC/DW,OAAO,CAAE,CACPC,aAAa,CAAE5B,KACjB,CACF,CAAC,CAAC,QACFD,UAAU,CAAC,EAAE,CAAC,CACdJ,QAAQ,CAAC,IAAI,CAAC,CAAC,yBAAAwB,QAAA,CAAAU,IAAA,MAAAd,OAAA,GAChB,UAAAN,KAAA,CAAAC,KAAA,MAAAC,SAAA,GACD,mBACE9B,IAAA,CAAAI,SAAA,EAAA6C,QAAA,cACEjD,IAAA,QACEkD,SAAS,CAAC,+BAA+B,CACzCC,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAM,CAAEC,SAAS,CAAE,aAAc,CAAE,CAAAJ,QAAA,CAEtDxC,IAAI,GAAK,aAAa,cACrBT,IAAA,CAACJ,QAAQ,EAAC0D,EAAE,CAAE,GAAI,CAAE,CAAC,CACnB7B,MAAM,GAAK,IAAI,cACjBzB,IAAA,CAACP,OAAO,GAAE,CAAC,cAEXS,KAAA,QAAA+C,QAAA,eACEjD,IAAA,CAACH,IAAI,CAAC0D,KAAK,EAACL,SAAS,CAAC,MAAM,CAAAD,QAAA,cAC1BjD,IAAA,OAAAiD,QAAA,CAAI,cAAY,CAAI,CAAC,CACX,CAAC,cACbjD,IAAA,QAAAiD,QAAA,cACEjD,IAAA,CAACH,IAAI,CAAC2D,OAAO,EACXC,IAAI,CAAC,MAAM,CACXC,IAAI,CAAC,OAAO,CACZC,QAAQ,CAAE,SAAAA,SAACC,CAAC,CAAK,CACf9C,QAAQ,CAAC8C,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC7B,CAAE,CACFZ,SAAS,CAAC,WAAW,CACtB,CAAC,CACC,CAAC,cACNlD,IAAA,CAACH,IAAI,CAAC0D,KAAK,EAACL,SAAS,CAAC,MAAM,CAAAD,QAAA,cAC1BjD,IAAA,OAAAiD,QAAA,CAAI,SAAO,CAAI,CAAC,CACN,CAAC,cACb/C,KAAA,QAAKgD,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/BjD,IAAA,CAACH,IAAI,CAAC2D,OAAO,EACXC,IAAI,CAAC,MAAM,CACXC,IAAI,CAAC,SAAS,CACdK,KAAK,CAAE9C,OAAQ,CACf0C,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAA1C,UAAU,CAAC0C,CAAC,CAACC,MAAM,CAACE,KAAK,CAAC,EAAC,CAC5Cb,SAAS,CAAC,WAAW,CACtB,CAAC,cACFlD,IAAA,CAACF,MAAM,EAACkE,OAAO,CAAC,mBAAmB,CAACC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAtC,IAAI,CAAC,CAAC,EAAC,CAAAsB,QAAA,CAAC,MAE3D,CAAQ,CAAC,EACN,CAAC,EACH,CACN,CACE,CAAC,CACN,CAAC,CAEP,CAEA,cAAe,CAAA5C,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}