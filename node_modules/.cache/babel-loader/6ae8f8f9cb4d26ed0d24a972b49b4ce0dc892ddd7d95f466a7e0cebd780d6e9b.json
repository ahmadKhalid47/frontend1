{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import BlueLoading from\"./CommentsLoading\";import dataGetterFunction from\"./DateGetterFunction\";import{Navigate}from\"react-router-dom\";import{Button,ListGroup}from\"react-bootstrap\";import MyContext from\"./HomeMyContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Share(p){var user=localStorage.getItem(\"email\");var token=localStorage.getItem(\"token\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),followingsList=_useState2[0],setFollowingsList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedPeople=_useState4[0],setSelectedPeople=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loader=_useState6[0],setLoader=_useState6[1];var targetedPic=p.targetedPic;var _useContext=useContext(MyContext),setShowShareList=_useContext.setShowShareList;useEffect(function(){dataGetterFunction(\"getfollowingsList\",setFollowingsList,setLoader);},[token,user]);function share(){return _share.apply(this,arguments);}function _share(){_share=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(selectedPeople.length!==0)){_context.next=5;break;}_context.next=3;return axios.post(\"http://127.0.0.1:5000/share/\".concat(user,\"/\").concat(targetedPic),{selectedPeople:selectedPeople},{headers:{Authorization:token}});case 3:setSelectedPeople([]);setShowShareList(false);case 5:case\"end\":return _context.stop();}},_callee);}));return _share.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:followingsList===\"token error\"?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(_Fragment,{children:loader?/*#__PURE__*/_jsx(BlueLoading,{}):/*#__PURE__*/_jsxs(ListGroup,{className:\" position-relative\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"share to:\"})}),followingsList.map(function(item,key){return/*#__PURE__*/_jsxs(ListGroup.Item,{className:\"d-flex justify-content-between\",variant:\"dark\",children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:item,children:/*#__PURE__*/_jsx(\"h1\",{children:item})}),/*#__PURE__*/_jsx(\"input\",{name:item,type:\"checkbox\",onChange:function onChange(e){e.target.checked?selectedPeople.push(item):setSelectedPeople(selectedPeople.filter(function(filterItem){return filterItem!==item;}));},className:\"checkBoxStyle w-25\"})]},key);}),/*#__PURE__*/_jsxs(ListGroup.Item,{variant:\"dark\",className:\"d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){setSelectedPeople([]);setShowShareList(false);},children:\"cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){share();},className:\"ms-3\",children:\"Send\"})]})]})})});}export default Share;","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","BlueLoading","dataGetterFunction","Navigate","Button","ListGroup","MyContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Share","p","user","localStorage","getItem","token","_useState","_useState2","_slicedToArray","followingsList","setFollowingsList","_useState3","_useState4","selectedPeople","setSelectedPeople","_useState5","_useState6","loader","setLoader","targetedPic","_useContext","setShowShareList","share","_share","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","length","post","concat","headers","Authorization","stop","children","to","className","Item","map","item","key","variant","htmlFor","name","type","onChange","e","target","checked","push","filter","filterItem","onClick"],"sources":["C:/Users/Ahmed Raza/source/repos/try/react_tut/frontend/src/Share.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport BlueLoading from \"./CommentsLoading\";\r\nimport dataGetterFunction from \"./DateGetterFunction\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { Button, ListGroup } from \"react-bootstrap\";\r\nimport MyContext from \"./HomeMyContext\";\r\nfunction Share(p) {\r\n  let user = localStorage.getItem(\"email\");\r\n  let token = localStorage.getItem(\"token\");\r\n  let [followingsList, setFollowingsList] = useState([]);\r\n  let [selectedPeople, setSelectedPeople] = useState([]);\r\n  let [loader, setLoader] = useState(true);\r\n  let targetedPic = p.targetedPic;\r\n  let { setShowShareList } = useContext(MyContext);\r\n\r\n  useEffect(() => {\r\n    dataGetterFunction(\"getfollowingsList\", setFollowingsList, setLoader);\r\n  }, [token, user]);\r\n\r\n  async function share() {\r\n    if (selectedPeople.length !== 0) {\r\n      await axios.post(\r\n        `http://127.0.0.1:5000/share/${user}/${targetedPic}`,\r\n        { selectedPeople },\r\n        {\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        }\r\n      );\r\n      setSelectedPeople([]);\r\n      setShowShareList(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {followingsList === \"token error\" ? (\r\n        <Navigate to={\"/\"} />\r\n      ) : (\r\n        <>\r\n          {loader ? (\r\n            <BlueLoading />\r\n          ) : (\r\n            <ListGroup className=\" position-relative\">\r\n              <ListGroup.Item>\r\n                <h2>share to:</h2>\r\n              </ListGroup.Item>\r\n              {followingsList.map((item, key) => (\r\n                <ListGroup.Item\r\n                  key={key}\r\n                  className=\"d-flex justify-content-between\"\r\n                  variant=\"dark\"\r\n                >\r\n                  <div htmlFor={item}>\r\n                    <h1>{item}</h1>\r\n                  </div>\r\n                  <input\r\n                    name={item}\r\n                    type=\"checkbox\"\r\n                    onChange={(e) => {\r\n                      e.target.checked\r\n                        ? selectedPeople.push(item)\r\n                        : setSelectedPeople(\r\n                            selectedPeople.filter(\r\n                              (filterItem) => filterItem !== item\r\n                            )\r\n                          );\r\n                    }}\r\n                    className=\"checkBoxStyle w-25\"\r\n                  />\r\n                </ListGroup.Item>\r\n              ))}\r\n              <ListGroup.Item\r\n                variant=\"dark\"\r\n                className=\"d-flex justify-content-end\"\r\n              >\r\n                <Button\r\n                  variant=\"danger\"\r\n                  onClick={() => {\r\n                    setSelectedPeople([]);\r\n                    setShowShareList(false);\r\n                  }}\r\n                >\r\n                  cancel\r\n                </Button>\r\n                <Button\r\n                  onClick={() => {\r\n                    share();\r\n                  }}\r\n                  className=\"ms-3\"\r\n                >\r\n                  Send\r\n                </Button>\r\n              </ListGroup.Item>\r\n            </ListGroup>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Share;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}